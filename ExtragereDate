import requests
import json
import time
lista_universitatii = ["upt.ro","uvt.ro"]
new_data = { }
for universitate in lista_universitatii :


    url = "https://api.builtwith.com/kw2/api.json"
    params = {
        'KEY': 'da773540-bbbe-4d8f-833d-70472429bd78',
        'LOOKUP': universitate
    }

    try:

        response = requests.get(url, params=params)
        response.raise_for_status()

        data = response.json()

        domain = data['Keywords'][0]['Domain']
        keywords = data['Keywords'][0]['Keywords']

        new_data.update({domain : keywords})
        print(new_data)

    except requests.exceptions.HTTPError as err:
        print(f"HTTP error occurred: {err}")
    except Exception as err:
        print(f"Other error occurred: {err}")
time.sleep(1)


def aparitii_keywords(dictionar_siteuri):
    rezultat = {}

    for site, keywords_list in dictionar_siteuri.items():

        for keyword in keywords_list:

            if keyword in rezultat:
                rezultat[keyword] += 1
            else:
                rezultat[keyword] = 1

    return rezultat
newest_data = aparitii_keywords(new_data)
print(newest_data)
